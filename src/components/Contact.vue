<template>
  <section id="contact" class="py-16 md:py-20 lg:py-24 bg-light relative overflow-hidden">
    <!-- Декоративные элементы -->
    <div class="absolute -right-16 top-40 w-64 h-64 rounded-full bg-primary opacity-5 parallax-bg"></div>

    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="section-title" data-aos="fade-up">Контакты</h2>
        <p class="max-w-2xl mx-auto text-muted" data-aos="fade-up" data-aos-delay="100">
          Свяжитесь с нами, чтобы записаться на консультацию или услугу
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-10 items-center">
        <!-- Левая колонка с информацией -->
        <div data-aos="fade-right" data-aos-delay="200">
          <div class="bg-white rounded-lg shadow-card p-8 relative z-10">
            <h3 class="text-2xl font-medium mb-6 text-primary">Информация</h3>

            <div class="space-y-6">
              <div class="flex items-start">
                <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                    class="text-primary" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                      d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z" />
                  </svg>
                </div>
                <div>
                  <h4 class="text-lg font-medium mb-1">Телефон</h4>
                  <a href="tel:89626653341" class="text-primary hover:underline">8 (962) 665-33-41</a>
                </div>
              </div>

              <div class="flex items-start">
                <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                    class="text-primary" viewBox="0 0 16 16">
                    <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" />
                  </svg>
                </div>
                <div>
                  <h4 class="text-lg font-medium mb-1">Адрес</h4>
                  <p class="text-muted">п.Плесецк, ул. Кооперативная 4Б, 3 этаж, офис 21</p>
                  <a href="https://yandex.ru/maps/-/CDeuqWy~" target="_blank" rel="noreferrer"
                    class="text-primary hover:underline inline-flex items-center mt-2">
                    <span>Открыть на карте</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="ml-1"
                      viewBox="0 0 16 16">
                      <path fill-rule="evenodd"
                        d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5z" />
                      <path fill-rule="evenodd"
                        d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0v-5z" />
                    </svg>
                  </a>
                </div>
              </div>

              <div class="flex items-start">
                <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                    class="text-primary" viewBox="0 0 16 16">
                    <path
                      d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" />
                  </svg>
                </div>
                <div>
                  <h4 class="text-lg font-medium mb-1">Социальные сети</h4>
                  <a href="https://vk.com/id560785882" target="_blank" rel="noreferrer"
                    class="inline-flex items-center text-primary hover:underline">
                    <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                      <path fill="currentColor"
                        d="M31.4907 63.4907C0 94.9813 0 145.671 0 247.04V264.96C0 366.329 0 417.019 31.4907 448.509C62.9813 480 113.671 480 215.04 480H232.96C334.329 480 385.019 480 416.509 448.509C448 417.019 448 366.329 448 264.96V247.04C448 145.671 448 94.9813 416.509 63.4907C385.019 32 334.329 32 232.96 32H215.04C113.671 32 62.9813 32 31.4907 63.4907ZM75.6 168.267H126.747C128.427 253.76 166.133 289.973 196 297.44V168.267H244.16V242C273.653 238.827 304.64 205.227 315.093 168.267H363.253C359.313 187.435 351.46 205.583 340.186 221.579C328.913 237.574 314.461 251.071 297.733 261.227C316.41 270.499 332.907 283.63 346.132 299.751C359.357 315.873 369.01 334.618 374.453 354.747H321.44C316.555 337.262 306.614 321.61 292.865 309.754C279.117 297.899 262.173 290.368 244.16 288.107V354.747H238.373C136.267 354.747 78.0267 284.747 75.6 168.267Z" />
                    </svg>
                    <span>ВКонтакте</span>
                  </a>
                </div>
              </div>

              <div class="flex items-start">
                <div class="bg-primary bg-opacity-10 rounded-full p-3 mr-4">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                    class="text-primary" viewBox="0 0 16 16">
                    <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z" />
                    <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z" />
                  </svg>
                </div>
                <div>
                  <h4 class="text-lg font-medium mb-1">Часы работы</h4>
                  <p class="text-muted">Пн-Пт: 9:00 - 20:00</p>
                  <p class="text-muted">Сб: 10:00 - 18:00</p>
                  <p class="text-muted">Вс: по предварительной записи</p>
                </div>
              </div>

              <div class="mt-8">
                <a href="https://vk.com/id560785882" target="_blank" rel="noreferrer"
                  class="btn btn-primary w-full text-center">
                  Записаться онлайн
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- Правая колонка с картой -->
        <div data-aos="fade-left" data-aos-delay="300" class="h-full">
          <div class="rounded-lg overflow-hidden shadow-card h-full">
            <iframe :src="mapSrc" width="100%" height="450" frameBorder="0" class="block" loading="lazy"></iframe>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue'

// Адаптивная карта
const isDesktop = ref(window.innerWidth >= 769)
const mapSrc = ref('')

// Обновляем источник карты в зависимости от размера экрана
const updateMapSrc = () => {
  isDesktop.value = window.innerWidth >= 769
  mapSrc.value = isDesktop.value
    ? "https://yandex.ru/map-widget/v1/?um=constructor%3A397d6169aa8aad70275c37250a3b90040ebeb1cc65750de311709e36aa926d29&amp;source=constructor"
    : "https://yandex.ru/map-widget/v1/?um=constructor%3Aa99ac96c267b07d270fd51cb90541a1f27be5084d370ec70a458a372b1798187&amp;source=constructor"
}

onMounted(() => {
  window.addEventListener('resize', updateMapSrc)
  updateMapSrc() // Обновляем при загрузке
})

onUnmounted(() => {
  window.removeEventListener('resize', updateMapSrc)
})
</script>

<style scoped>
/* Пульсирующая анимация для кнопки "Записаться" */
.btn-primary {
  position: relative;
  overflow: hidden;
}

.btn-primary::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 5px;
  height: 5px;
  background: rgba(255, 255, 255, 0.5);
  opacity: 0;
  border-radius: 100%;
  transform: scale(1, 1) translate(-50%);
  transform-origin: 50% 50%;
}

@keyframes ripple {
  0% {
    transform: scale(0, 0);
    opacity: 0.5;
  }

  100% {
    transform: scale(20, 20);
    opacity: 0;
  }
}

.btn-primary:focus:not(:active)::after {
  animation: ripple 1s ease-out;
}
</style>
